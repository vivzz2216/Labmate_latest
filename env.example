# LabMate AI Environment Configuration
# Copy this file to .env and fill in your values
#
# =============================================================================
# RAILWAY DEPLOYMENT NOTES
# =============================================================================
# For Railway.app deployment:
# 1. PORT is automatically set by Railway - DO NOT set it manually
# 2. DATABASE_URL is automatically provided when you add PostgreSQL plugin
# 3. Set ALLOWED_ORIGINS to your Railway frontend URL (if deploying frontend separately)
# 4. Set NEXT_PUBLIC_API_URL to your Railway backend URL
# 5. All other variables must be set in Railway dashboard under "Variables"
#
# Required for Railway:
# - DATABASE_URL (auto-provided by Railway PostgreSQL plugin)
# - BETA_KEY (required for API access)
# - SECRET_KEY (required for session security)
# - OPENAI_API_KEY (required for AI features)
# - ALLOWED_ORIGINS (set to your frontend URL)
# - NEXT_PUBLIC_API_URL (set to your backend URL, if deploying frontend)
#
# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_USER=labmate
POSTGRES_PASSWORD=labmate_password
POSTGRES_DB=labmate_db
DATABASE_URL=postgresql://labmate:labmate_password@postgres:5432/labmate_db

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# CRITICAL: Generate strong, unique keys for production!
# Use: openssl rand -hex 32

# Beta key for API access (32+ random characters)
BETA_KEY=CHANGE_ME_TO_RANDOM_32_CHAR_STRING

# Secret key for JWT/session signing (32+ random characters)
SECRET_KEY=CHANGE_ME_TO_DIFFERENT_RANDOM_32_CHAR_STRING

# Allowed CORS origins (comma-separated)
# For Railway: Set to your frontend URL, e.g., https://your-app.railway.app
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================
# Directories for file storage (these are Docker container paths)
UPLOAD_DIR=/app/uploads
SCREENSHOT_DIR=/app/screenshots
REPORT_DIR=/app/reports

# =============================================================================
# DOCKER EXECUTION CONFIGURATION
# =============================================================================
# Python Docker image for code execution
DOCKER_IMAGE=python:3.10-slim

# Resource limits for code execution containers
CONTAINER_TIMEOUT=30
MEMORY_LIMIT=512m
CPU_PERIOD=100000
CPU_QUOTA=50000

# =============================================================================
# FILE UPLOAD LIMITS
# =============================================================================
# Maximum file size in bytes (50MB = 50 * 1024 * 1024)
MAX_FILE_SIZE=52428800

# Maximum code length in characters
MAX_CODE_LENGTH=5000

# =============================================================================
# OPENAI CONFIGURATION
# =============================================================================
# OpenAI API key for AI analysis and code generation
OPENAI_API_KEY=your_openai_api_key_here

# OpenAI model to use (gpt-4o-mini, gpt-4, etc.)
OPENAI_MODEL=gpt-4o-mini

# Maximum tokens for OpenAI responses
OPENAI_MAX_TOKENS=4000

# =============================================================================
# CLAUDE / ANTHROPIC CONFIGURATION
# =============================================================================
# Claude API key for AI code review (required for live model output)
CLAUDE_API_KEY=your_claude_api_key_here

# Claude model identifier (e.g., claude-3-5-sonnet-20241022)
CLAUDE_MODEL=claude-3-5-sonnet-20241022

# Maximum tokens returned per review response
CLAUDE_MAX_TOKENS=2000

# Timeout for Claude API requests (seconds)
CLAUDE_REQUEST_TIMEOUT=45

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis URL for caching and rate limiting
# Use your Redis Labs connection string or local Redis (redis://redis:6379/0)
REDIS_URL=redis://default:hkIdOTA6qPbssm2aHVzjEjr7Ml1jPTi1@redis-19706.c281.us-east-1-2.ec2.cloud.redislabs.com:19706

# Redis cache TTL in seconds (default: 3600 = 1 hour)
REDIS_CACHE_TTL=3600

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Enable rate limiting (true/false)
RATE_LIMIT_ENABLED=true

# Maximum requests per minute per IP address
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# Backend API URL for frontend to connect to
# For Railway: Set to your backend URL, e.g., https://your-backend.railway.app
NEXT_PUBLIC_API_URL=http://localhost:8000

# Site URL for SEO (update with your production domain)
NEXT_PUBLIC_SITE_URL=https://yourdomain.com

# Google Search Console verification code (optional)
NEXT_PUBLIC_GOOGLE_VERIFICATION=
